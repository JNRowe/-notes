<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width" />
        <title>Notes</title>
        <style>
            div.note {
                border: 1px solid #eaeaea;
            }
            blockquote:before {
                content: "“";
            }
            blockquote:after {
                content: "”";
            }
        </style>
    </head>
    <body>
        <div class="timeline">
            {% for note in notes | sort(reverse=True, attribute='timestamp') %}
                <div class="note" id="{{ note.timestamp }}">
                    {% if 'in_reply_to' in note %}
                        {% if 'url' in note.in_reply_to %}
                            <p>
                                In response to
                                <a href="{{ note.in_reply_to.url }}">
                                    {{ note.in_reply_to.title }}
                                </a>:
                            </p>
                        {% elif 'self' in note.in_reply_to %}
                            <p>
                                In reply to
                                <a href="#{{ note.in_reply_to.self }}">my post</a>
                                on <time>{{ note.in_reply_to.self }}</time>:
                            </p>
                        {% else %}
                            <p>
                                In reply to {{ note.in_reply_to.toot.user }}'s post
                                on
                                <time>{{ note.in_reply_to.toot.timestamp }}</time>:
                            </p>
                            <blockquote>{{ note.in_reply_to.text }}</blockquote>
                        {% endif %}
                    {% endif %}
                    <p>{{ note.text }}</p>
                    <time>{{ note.timestamp }}</time>
                </div>
            {% endfor %}
        </div>
    </body>
</html>
